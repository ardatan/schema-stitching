# ![Schema Stitching Handbook](/assets/banner-1.jpg)

Guided examples of [Schema Stitching](/docs) doing awesome things. Focuses on the new (GraphQL Tools
v6+) stitching using [type merging](/docs/approaches/type-merging), not legacy
[Apollo Stitching](https://www.apollographql.com/docs/federation/migrating-from-stitching/).

> This handbook initially created by [Greg MacWilliam](https://github.com/gmac)

## Table of Contents

### Foundation

- **[Combining local and remote schemas](/handbook/foundation/combining-local-and-remote-schemas)**

  - Adding a locally-executable schema.
  - Adding a remote schema, fetched via introspection.
  - Adding a remote schema, fetched from a custom SDL service.
  - Avoiding schema conflicts using transforms.
  - Authorization headers.
  - Basic error handling.

- **[Mutations &amp; subscriptions](/handbook/foundation/mutations-and-subscriptions)**

  - Adding a remote mutation service.
  - Adding a remote subscription service.
  - Adding a subscriber proxy.

- **[Single-record type merging](/handbook/foundation/type-merging-single-records)**

  - Type merging using single-record queries.
  - Query/execution batching.

- **[Array-batched type merging](/handbook/foundation/type-merging-arrays)**

  - Type merging using array queries.
  - Handling array errors.
  - Nullability & error remapping.

- **[Merged types with multiple keys](/handbook/foundation/type-merging-multiple-keys)**

  - Configuring multiple key entry points for a merged type.

- **[Nullable merges](/handbook/foundation/type-merging-nullables)**

  - Selecting nullability for merged fields.
  - Returning nullable and not-nullable results.

- **[Custom merge resolvers](/handbook/foundation/custom-merge-resolvers)**

  - Using `valuesFromResults` to normalize resulting query data.
  - Adapting type merging to query through namespaced scopes.
  - Adapting type merging to query through non-root fields.
  - Using `batchDelegateToSchema` and `delegateToSchema`.

- **[Cross-service interfaces](/handbook/foundation/type-merging-interfaces)**

  - Distributing a GraphQL interface across services.

- **[Computed fields](/handbook/foundation/computed-fields)**

  - Configuring computed fields.
  - Sending complex inputs to subservices.
  - Normalizing subservice deprecations in the gateway.

- **[Stitching directives SDL](/handbook/foundation/stitching-directives-sdl)**

  - `@key` directive for type-level selection sets.
  - `@merge` directive for type merging services.
  - `@computed` directive for computed fields.
  - `@canonical` directive for preferred element definitions.

### Architecture

- **[Hot schema reloading](/handbook/architecture/hot-schema-reloading)**

  - Hot reload of the combined gateway schema (no server restart).
  - Polling for remote subschema changes.
  - Mutations for adding/removing remote subservices.
  - Handling subservice request timeouts.

- **[Versioning schema releases](/handbook/architecture/versioning-schema-releases)**

  - Using GitHub API to manage a simple schema registry.
  - Hot reloading from a remote Git registry.
  - Running development and production environments.

- **[Continuous Integration (CI) testing](/handbook/architecture/continuous-integration-testing)**

  - Adding test coverage to a stitched schema.
  - Mocking subservices as local test fixtures.

- **[Public and private APIs](/handbook/architecture/public-and-private-apis)**

  - Filtering unwanted fields from the final stitched schema.
  - Serving public (filtered) and private (unfiltered) API versions.

- **[Persistent connection via WebSockets](/handbook/architecture/persistent-connection)**

  - Creating a
    [GraphQL over WebSocket Protocol](https://github.com/enisdenjo/graphql-ws/blob/master/PROTOCOL.md)
    executor for the persistent connection to the services.

### Other Integrations

- **[Federation services](/handbook/other-integrations/federation-services)**

  - Integrating Apollo Federation services into a stitched schema.
  - Fetching and parsing Federation SDLs.

- **[Subservice languages](/handbook/other-integrations/subservice-languages)**

  - **[JavaScript](/handbook/other-integrations/subservice-languages/javascript)** schemas created
    with:

    - `graphql-js`
    - `nexus`
    - `type-graphql`

  - **[Ruby](/handbook/other-integrations/subservice-languages/ruby)** schemas created with:

    - Class-based definitions
    - Parsed definitions string

- **[GraphQL Upload](/handbook/other-integrations/graphql-upload)**

  - Adding GraphQL Upload to the gateway server

### Appendices

- [What is Array Batching?](/handbook/appendices/batching-arrays-and-queries#what-is-array-batching)
- [What is Query Batching?](/handbook/appendices/batching-arrays-and-queries#what-is-query-batching)
