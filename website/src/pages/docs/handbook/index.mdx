# ![Schema Stitching Handbook](/assets/banner-1.jpg)

Guided examples of [Schema Stitching](/docs) doing awesome things. Focuses on the new (GraphQL Tools v6+) stitching using [type merging](/docs/approaches/type-merging), not legacy [Apollo Stitching](https://www.apollographql.com/docs/federation/migrating-from-stitching/).

> This handbook initially created by [Greg MacWilliam](https://github.com/gmac)

## Table of Contents

- **[Combining local and remote schemas](/docs/handbook/combining-local-and-remote-schemas)**

  - Adding a locally-executable schema.
  - Adding a remote schema, fetched via introspection.
  - Adding a remote schema, fetched from a custom SDL service.
  - Avoiding schema conflicts using transforms.
  - Authorization headers.
  - Basic error handling.

- **[Mutations &amp; subscriptions](/docs/handbook/mutations-and-subscriptions)**

  - Adding a remote mutation service.
  - Adding a remote subscription service.
  - Adding a subscriber proxy.

- **[Single-record type merging](/docs/handbook/type-merging-single-records)**

  - Type merging using single-record queries.
  - Query/execution batching.

- **[Array-batched type merging](/docs/handbook/type-merging-arrays)**

  - Type merging using array queries.
  - Handling array errors.
  - Nullability & error remapping.

- **[Merged types with multiple keys](/docs/handbook/type-merging-multiple-keys)**

  - Configuring multiple key entry points for a merged type.

- **[Nullable merges](/docs/handbook/type-merging-nullables)**

  - Selecting nullability for merged fields.
  - Returning nullable and not-nullable results.

- **[Custom merge resolvers](/docs/handbook/custom-merge-resolvers)**

  - Using `valuesFromResults` to normalize resulting query data.
  - Adapting type merging to query through namespaced scopes.
  - Adapting type merging to query through non-root fields.
  - Using `batchDelegateToSchema` and `delegateToSchema`.

- **[Cross-service interfaces](/docs/handbook/type-merging-interfaces)**

  - Distributing a GraphQL interface across services.

- **[Computed fields](/docs/handbook/computed-fields)**

  - Configuring computed fields.
  - Sending complex inputs to subservices.
  - Normalizing subservice deprecations in the gateway.

- **[Stitching directives SDL](/docs/handbook/stitching-directives-sdl)**

  - `@key` directive for type-level selection sets.
  - `@merge` directive for type merging services.
  - `@computed` directive for computed fields.
  - `@canonical` directive for preferred element definitions.

### Architecture

- **[Hot schema reloading](/docs/handbook/hot-schema-reloading)**

  - Hot reload of the combined gateway schema (no server restart).
  - Polling for remote subschema changes.
  - Mutations for adding/removing remote subservices.
  - Handling subservice request timeouts.

- **[Versioning schema releases](/docs/handbook/versioning-schema-releases)**

  - Using GitHub API to manage a simple schema registry.
  - Hot reloading from a remote Git registry.
  - Running development and production environments.

- **[Continuous Integration (CI) testing](/docs/handbook/continuous-integration-testing)**

  - Adding test coverage to a stitched schema.
  - Mocking subservices as local test fixtures.

- **[Public and private APIs](/docs/handbook/public-and-private-apis)**

  - Filtering unwanted fields from the final stitched schema.
  - Serving public (filtered) and private (unfiltered) API versions.

### Other Integrations

- **[Federation services](/docs/handbook/federation-services)**

  - Integrating Apollo Federation services into a stitched schema.
  - Fetching and parsing Federation SDLs.

- **[Subservice languages](/docs/handbook/subservice-languages)**

  - **[JavaScript](/docs/handbook/subservice-languages/javascript)** schemas created with:

    - `graphql-js`
    - `nexus`
    - `type-graphql`

  - **[Ruby](/docs/handbook/subservice-languages/ruby)** schemas created with:

    - Class-based definitions
    - Parsed definitions string

- **[GraphQL Upload](/docs/handbook/graphql-upload)**

  - Adding GraphQL Upload to the gateway server

### Appendices

- [What is Array Batching?](/docs/handbook/batching-arrays-and-queries#what-is-array-batching)
- [What is Query Batching?](/docs/handbook/batching-arrays-and-queries#what-is-query-batching)
